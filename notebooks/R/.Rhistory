labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
country <- "Papua New Guinea"
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, n.breaks=6) + #n.breaks=7
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
country <- "Papua New Guinea"
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(.1,.2,.3,.4,.5,.6,.7)) + #n.breaks=7
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
country <- "Papua New Guinea"
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent) + # breaks = c(.1,.2,.3,.4,.5,.6,.7) n.breaks=7
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
paste0("../../docs/images/ntl_cloud_coverage/Cloud Coverage ", country, ".jpeg")
paste0("../../docs/images/ntl_cloud_coverage/Cloud Coverage ", country, ".jpeg")
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent) + # breaks = c(.1,.2,.3,.4,.5,.6,.7) n.breaks=7
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
ggsave(paste0("../../docs/images/ntl_cloud_coverage/Cloud Coverage ", country, ".jpeg"), width = 8, height = 6)
}
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent) + # breaks = c(.1,.2,.3,.4,.5,.6,.7) n.breaks=7
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
ggsave(paste0("../../docs/images/ntl_cloud_coverage/Cloud Coverage ", country, ".jpeg"), width = 10, height = 6)
}
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1)) + # breaks = c(.1,.2,.3,.4,.5,.6,.7) n.breaks=7
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
ggsave(paste0("../../docs/images/ntl_cloud_coverage/Cloud Coverage ", country, ".jpeg"), width = 10, height = 6)
}
df.filt
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
ggsave(paste0("../../docs/images/ntl_cloud_coverage/Cloud Coverage ", country, ".jpeg"), width = 10, height = 6)
}
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
country
rep
rep?
e
e
e
e
strp
replace
country="Papua New Guinea"
country="Papua New Guinea"
country
sub(" ", "_", country)
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
country <- sub(" ", "-", country)
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
sub(" ", "_", country)
country="Papua New Guinea"
sub(" ", "_", country)
sub
gsub(" ", "_", country)
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
country <- gsub(" ", "-", country)
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
plt
warnings()
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
warnings()
names(pdfFonts())
library(extrafont)
font_import()
font_import()
q
q
exit
loadfonts(device = "win")
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
plt
warnings()
library(showtext)
install.packages("showtext")
library(showtext)
font_families()
font_paths()
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
plt
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum()
plt
custom <- theme(family="Calibri"))
custom <- theme(family="Calibri")
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum() +
custom()
plt
warnings()
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
# theme_ipsum() +
custom()
plt
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
# theme_ipsum() +
custom()
plt
showtext_auto()
warnings()
font_add("constan", regular = "constan.ttf", italic = "constani.ttf")
show_text()
showtext_auto()
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 1.1, family = "heiti", size = 15,
label = "\u4F60\u597D\uFF0C\u4E16\u754C") +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "constan", fontface = "italic", size = 12)
p
font_add("heiti", "simhei.ttf")
## Constantia font with regular and italic font faces
font_add("constan", regular = "constan.ttf", italic = "constani.ttf")
font_add("constan", regular = "constan.ttf", italic = "constani.ttf")
font_add("andes", regular = "andes", italic = "andes")
font_add("andes", regular = "andesr", italic = "andes")
font_add("andes", regular = "Andes-Regular.otf")
font_add("Andes", regular = "Andes-Regular.otf")
showtext_auto()
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 1.1, family = "heiti", size = 15,
label = "\u4F60\u597D\uFF0C\u4E16\u754C") +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "constan", fontface = "italic", size = 12)
p
font_add("Andes", regular = "Andes-Regular.otf")
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 1.1, family = "heiti", size = 15,
label = "\u4F60\u597D\uFF0C\u4E16\u754C") +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "Andes", fontface = "italic", size = 12)
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 1.1, family = "heiti", size = 15,
label = "\u4F60\u597D\uFF0C\u4E16\u754C") +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "Andes", fontface = "regular", size = 12)
p
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 1.1, family = "heiti", size = 15,
label = "\u4F60\u597D\uFF0C\u4E16\u754C") +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "Andes", fontface = "Regular", size = 12)
p
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "Andes", size = 12)
p
font_add("Roboto", regular = "Roboto-Regular.otf")
font_add("Roboto", regular = "Roboto-Regular.ttf")
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "Roboto", size = 12)
p
font_add
font_add?
dd
d
s
font_add
font_add
?font_add
font_add("Roboto Condensed", regular = "Roboto-Thin.ttf")
p = ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +
theme(axis.title = element_blank(), axis.ticks = element_blank(),
axis.text = element_blank()) +
annotate("text", 1, 0.9, label = 'Chinese for "Hello, world!"',
family = "Roboto Condensed", size = 12)
p
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
# custom()
plt
font_add_google("Gochi Hand", "gochi")
font_add_google("Roboto Condensed", "Roboto Condensed")
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
# custom()
plt
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
plt
country <- gsub(" ", "-", country)
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
library(dplyr)
library(ggplot2)
library(here)
here()
df <- read.csv("../../data/ntl_adm0_pct_cloud.csv", row.names=1)
df$date <- as.Date(df$date)
df$year <- as.integer(format(df$date, "%Y"))
df <- df %>% filter(year>2018)
df$pct_inv = 1-df$pct
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
plt
country <- gsub(" ", "-", country)
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
library(hrbrthemes)
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_ipsum_rc()
plt
country <- gsub(" ", "-", country)
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
library(hrbrthemes)
library(dplyr)
library(ggplot2)
library(here)
for (country in unique(df$WB_ADM0_NA)) {
df.filt <- df[df$WB_ADM0_NA==country,]
plt <- ggplot(data=df.filt, aes(x=date, y=pct_inv)) +
geom_col(alpha=0.75, width=20) +
scale_y_continuous(labels = scales::percent, breaks = c(0,.25,.5,.75,1), limits=c(0,1)) +
labs(x="", y = "", title = paste0("Cloud Coverage by Month, ", country),
subtitle = "% of pixels with clouds") +
scale_x_date(date_breaks="2 months", expand=c(0.02,0.02), # date_labels = "%b",
labels = function(x) if_else(is.na(lag(x)) | !year(lag(x)) == year(x),
paste(month(x, label = TRUE), "\n", year(x)),
paste(month(x, label = TRUE)))
) +
theme_minimal()
# theme_ipsum_rc()
plt
country <- gsub(" ", "-", country)
ggsave(paste0("../../docs/images/ntl_cloud_coverage/", country, ".jpeg"), width = 10, height = 6)
}
